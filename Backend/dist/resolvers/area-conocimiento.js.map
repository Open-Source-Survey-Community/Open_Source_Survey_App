{"version":3,"sources":["../../resolvers/area-conocimiento.js"],"names":["Query","listadoAreaConocimiento","parent","args","models","areasConocimiento","find","idioma","populate","then","listaArasConocimientos","catch","error","Error","filtrarAreasConocimiento","titulo","RegExp","caracter","listaAreasConocimiento","Mutation","crearNuevaAreaConocimiento","area","etiqueta","save","documento","editarAreaConocimientoPregunta","findOne","_id","id","usuariopropietario","correo","Pregunta","count","areaconocimiento","numeroEtiquetasConocimiento","findByIdAndUpdate","$set","descripcion","new","eliminarAreaConocimientoPregunta","findByIdAndRemove"],"mappings":"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","file":"area-conocimiento.js","sourcesContent":["export default {\n\tQuery: {\n\t\tlistadoAreaConocimiento: (parent, args, {models}) => {\n\t\t\treturn models.areasConocimiento.find({idioma: args.idioma})\n\t\t\t\t.populate(\"usuariopropietario\")\n\t\t\t\t.then(listaArasConocimientos => {\n\t\t\t\t\treturn listaArasConocimientos;\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t},\n\t\tfiltrarAreasConocimiento: (parent, args, {models}) => {\n\t\t\treturn models.areasConocimiento.find({titulo: new RegExp(args.caracter,\"i\"), idioma: args.idioma})\n\t\t\t\t.populate(\"usuariopropietario\")\n\t\t\t\t.then(listaAreasConocimiento => {\n\t\t\t\t\treturn listaAreasConocimiento;\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t}\n\n\t},\n\tMutation: {\n\t\tcrearNuevaAreaConocimiento: (parent, args, {models}) => {\n\t\t\tconst area = new models.areasConocimiento(args.etiqueta);\n\t\t\treturn area.save()\n\t\t\t\t.then(documento => {\n\t\t\t\t\treturn documento;\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\teditarAreaConocimientoPregunta: (parent, args, {models}) => {\n\t\t\treturn models.areasConocimiento.findOne({_id: args.id}).populate(\"usuariopropietario\")\n\t\t\t\t.then(documento => {\n\t\t\t\t\tif (documento.usuariopropietario.correo !== args.correo) {\n\t\t\t\t\t\tif (args.idioma === \"es\") {\n\t\t\t\t\t\t\tthrow new Error(\"no puede editar esta etiqueta porque usted no es el propietario\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(args.idioma === \"en\") {\n\t\t\t\t\t\t\tthrow new Error(\"you can not edit this tag because you are not the own! \");\n\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn models.Pregunta.count({areaconocimiento: args.id })\n\t\t\t\t\t\t\t.then(numeroEtiquetasConocimiento => {\n\t\t\t\t\t\t\t\tif (numeroEtiquetasConocimiento > 0) {\n\t\t\t\t\t\t\t\t\tif (args.idioma === \"en\") {\n\t\t\t\t\t\t\t\t\t\tthrow new Error(numeroEtiquetasConocimiento + \"questions have these tag!\");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (args.idioma === \"es\"){\n\t\t\t\t\t\t\t\t\t\tthrow new Error(numeroEtiquetasConocimiento + \"preguntas estan usando determinada etiqueta\");\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn models.areasConocimiento.findByIdAndUpdate(args.id,\n\t\t\t\t\t\t\t\t\t\t{$set: {titulo: args.titulo, descripcion: args.descripcion, idioma: args.idioma}},\n\t\t\t\t\t\t\t\t\t\t{new: true})\n\t\t\t\t\t\t\t\t\t\t.populate(\"usuariopropietario\")\n\t\t\t\t\t\t\t\t\t\t.then(documento => {\n\t\t\t\t\t\t\t\t\t\t\treturn documento;\n\t\t\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t},\n\t\teliminarAreaConocimientoPregunta: (parent, args, {models}) => {\n\t\t\treturn models.areasConocimiento.findOne({_id: args.id}).populate(\"usuariopropietario\")\n\t\t\t\t.then(documento => {\n\t\t\t\t\tif (documento.usuariopropietario.correo !== args.correo) {\n\t\t\t\t\t\tif (args.idioma === \"es\") {\n\t\t\t\t\t\t\tthrow new Error(\"no puede eliminar esta etiqueta porque usted no es el propietario\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(args.idioma === \"en\") {\n\t\t\t\t\t\t\tthrow new Error(\"you can not delete this tag because you are not the own! \");\n\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn models.Pregunta.count({areaconocimiento: args.id })\n\t\t\t\t\t\t\t.then(numeroEtiquetasConocimiento => {\n\t\t\t\t\t\t\t\tif (numeroEtiquetasConocimiento > 0) {\n\t\t\t\t\t\t\t\t\tif (args.idioma === \"en\") {\n\t\t\t\t\t\t\t\t\t\tthrow new Error(numeroEtiquetasConocimiento + \"questions having these tag!\");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse if (args.idioma === \"es\"){\n\t\t\t\t\t\t\t\t\t\tthrow new Error(numeroEtiquetasConocimiento + \"preguntas estan usando determinada etiqueta\");\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn models.areasConocimiento.findByIdAndRemove(args.id).populate(\"usuariopropietario\")\n\t\t\t\t\t\t\t\t\t\t.then(documento => {\n\t\t\t\t\t\t\t\t\t\t\treturn documento;\n\t\t\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t}\n\t}\n};"]}