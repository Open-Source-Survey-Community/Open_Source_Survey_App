{"version":3,"sources":["../../resolvers/user.js"],"names":["Query","mostrarPerfilUsuario","parent","args","models","id","User","findById","then","usuario","catch","error","Error","listaUsuariosByName","find","RegExp","nombre","resultados","listarTodosUsuarios","usuarios","Mutation","crearUsuario","findOne","correo","response","userInstance","urlImage","roles","rol","Acciones","acciones","save","documento","editarInstitucionUsuario","findByIdAndUpdate","$set","institucion","upsert","new","editarGradoAcademicoUsuario","grado_academico","editarAreaAcademica","area_academica","addWiki","wiki","editarNombreUsuario","editarApellido","apellido","addImage","imagen"],"mappings":"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","file":"user.js","sourcesContent":["export default {\n\n\tQuery:{\n\t\tmostrarPerfilUsuario: (parent, args, {models})=>{\n\t\t\tif (args.id){\n\t\t\t\treturn\tmodels.User.findById(args.id)\n\t\t\t\t\t.then(usuario=>{\n\t\t\t\t\t\treturn usuario;\n\t\t\t\t\t}).catch(error=>{\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\t\t\t}else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tlistaUsuariosByName: (parent, args, {models})=> {\n\t\t\treturn models.User.find({\n\t\t\t\t\"nombre\": new RegExp(args.nombre, \"i\")\n\t\t\t})\n\t\t\t\t.then(resultados =>{\n\t\t\t\t\treturn resultados;\n\t\t\t\t}).catch(error =>{\n\t\t\t\t\tif (error){\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t},\n\t\tlistarTodosUsuarios: (parent, args, {models})=> {\n\t\t\treturn models.User.find()\n\t\t\t\t.then(usuarios=>{\n\t\t\t\t\treturn usuarios;\n\t\t\t\t}).catch(error=>{\n\t\t\t\t\tif (error){\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t},\n\tMutation:{\n\t\tcrearUsuario: (parent, args, {models})=> {\n\t\t\treturn \tmodels.User.findOne({\n\t\t\t\tcorreo: args.correo\n\t\t\t},\"_id nombre apellido correo urlImage wiki institucion grado_academico area_academica roles\").then(response=>{\n\t\t\t\tif (!response){\n\t\t\t\t\tlet userInstance = new models.User({correo: args.correo,\n\t\t\t\t\t\tnombre: args.nombre,\n\t\t\t\t\t\turlImage: args.urlImage,\n\t\t\t\t\t\troles: [{rol:args.rol, Acciones: [args.acciones]}]});\n\t\t\t\t\tuserInstance.save().then(documento => {\n\t\t\t\t\t\treturn documento;\n\t\t\t\t\t}).catch((error) => {\n\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn response;\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tif (error){\n\t\t\t\t\tthrow new Error(error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\t\teditarInstitucionUsuario:(parent, args, {models})=>{\n\t\t\tif (args.id ) {\n\t\t\t\treturn models.User.findByIdAndUpdate(args.id,{$set:{institucion:args.institucion}},{upsert: true,new: true})\n\t\t\t\t\t.then(documento=>{\n\t\t\t\t\t\treturn documento;\n\t\t\t\t\t}).catch(error=>{\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\teditarGradoAcademicoUsuario: (parent, args, {models})=>{\n\t\t\tif (args.id ) {\n\t\t\t\treturn models.User.findByIdAndUpdate(args.id,{$set:{grado_academico:args.grado_academico}},{upsert: true,new: true})\n\t\t\t\t\t.then(documento=>{\n\t\t\t\t\t\treturn documento;\n\t\t\t\t\t}).catch(error=>{\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\teditarAreaAcademica: (parent, args, {models})=>{\n\t\t\tif (args.id) {\n\t\t\t\treturn models.User.findByIdAndUpdate(args.id,{$set:{area_academica:args.area_academica}},{new: true})\n\t\t\t\t\t.then(documento=>{\n\t\t\t\t\t\treturn documento;\n\t\t\t\t\t}).catch(error=>{\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}else {\n\t\t\t\treturn null;\n\n\t\t\t}\n\t\t},\n\t\taddWiki: (parent, args, {models})=>{\n\t\t\tif (args.id) {\n\t\t\t\treturn models.User.findByIdAndUpdate(args.id,{$set:{wiki:args.wiki}},{new: true})\n\t\t\t\t\t.then(documento=>{\n\t\t\t\t\t\treturn documento;\n\t\t\t\t\t}).catch(error=>{\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t}else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\teditarNombreUsuario: (parent, args, {models})=>{\n\t\t\tif (args.id && args.nombre) {\n\t\t\t\treturn models.User.findByIdAndUpdate(args.id,{$set:{nombre:args.nombre}},{new: true})\n\t\t\t\t\t.then(documento=>{\n\t\t\t\t\t\treturn documento;\n\t\t\t\t\t}).catch(error=>{\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t}else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\teditarApellido: (parent, args, {models})=>{\n\t\t\tif (args.id && args.apellido){\n\t\t\t\treturn models.User.findByIdAndUpdate(args.id,{$set:{apellido:args.apellido}},{new: true})\n\t\t\t\t\t.then(documento=>{\n\t\t\t\t\t\treturn documento;\n\t\t\t\t\t}).catch(error=>{\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\taddImage: (parent, args, {models})=>{\n\t\t\tif (args.id){\n\t\t\t\treturn models.User.findByIdAndUpdate(args.id,{$set:{urlImage:args.imagen}},{new: true})\n\t\t\t\t\t.then(documento=>{\n\t\t\t\t\t\treturn documento;\n\t\t\t\t\t}).catch(error=>{\n\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t}else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\n};"]}