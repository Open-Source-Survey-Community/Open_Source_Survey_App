"use strict";

var mongoose = require("mongoose");
var Schema = mongoose.Schema;

var PreguntaSchema = new Schema({
	descripcion: { type: String, index: true },
	usuario_ID: {
		type: Schema.Types.ObjectId,
		ref: "usuario"
	},
	identificador: { type: Number, default: 1 },
	historial_cambios: [{
		descripcion: String,
		imagen: String,
		fecha_creacion: String,
		tipoPregunta: String,
		estado: String,
		areaconocimiento: [{
			type: Schema.Types.ObjectId,
			ref: "areas-conocimiento"
		}],
		respuestas: [String]
	}],
	registroActual: { type: Boolean, index: true, default: true },
	imagen: { type: String, default: "no image" },
	fecha_creacion: { type: Date, index: true },
	fecha_cierre: { type: Date, index: true },
	estados_asignados: [{
		usuario: {
			type: Schema.Types.ObjectId,
			ref: "usuario"
		},
		estado_asignado: String,
		observacion: String,
		fecha_asignacion: { type: Date, index: true }
	}],
	estado: { type: String, default: "revision" },
	tipoPregunta: { type: String, default: "open answer" },
	areaconocimiento: [{
		type: Schema.Types.ObjectId,
		ref: "areas-conocimiento"
	}],
	respuestas: [{
		type: String
	}],
	comentarios: [{
		type: Schema.Types.ObjectId,
		ref: "comentario"
	}],
	discusiones: [{
		type: Schema.Types.ObjectId,
		ref: "discusionPregunta"
	}]
});

PreguntaSchema.index({ "descripcion": "text" });
var Pregunta = mongoose.model("pregunta", PreguntaSchema);

module.exports = Pregunta;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL21vZGVscy9QcmVndW50YXMuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiU2NoZW1hIiwiUHJlZ3VudGFTY2hlbWEiLCJkZXNjcmlwY2lvbiIsInR5cGUiLCJTdHJpbmciLCJpbmRleCIsInVzdWFyaW9fSUQiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiaWRlbnRpZmljYWRvciIsIk51bWJlciIsImRlZmF1bHQiLCJoaXN0b3JpYWxfY2FtYmlvcyIsImltYWdlbiIsImZlY2hhX2NyZWFjaW9uIiwidGlwb1ByZWd1bnRhIiwiZXN0YWRvIiwiYXJlYWNvbm9jaW1pZW50byIsInJlc3B1ZXN0YXMiLCJyZWdpc3Ryb0FjdHVhbCIsIkJvb2xlYW4iLCJEYXRlIiwiZmVjaGFfY2llcnJlIiwiZXN0YWRvc19hc2lnbmFkb3MiLCJ1c3VhcmlvIiwiZXN0YWRvX2FzaWduYWRvIiwib2JzZXJ2YWNpb24iLCJmZWNoYV9hc2lnbmFjaW9uIiwiY29tZW50YXJpb3MiLCJkaXNjdXNpb25lcyIsIlByZWd1bnRhIiwibW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLFdBQVdDLFFBQVEsVUFBUixDQUFqQjtBQUNBLElBQU1DLFNBQVNGLFNBQVNFLE1BQXhCOztBQUVBLElBQU1DLGlCQUFpQixJQUFJRCxNQUFKLENBQVc7QUFDakNFLGNBQVksRUFBQ0MsTUFBTUMsTUFBUCxFQUFlQyxPQUFPLElBQXRCLEVBRHFCO0FBRWpDQyxhQUFZO0FBQ1hILFFBQU1ILE9BQU9PLEtBQVAsQ0FBYUMsUUFEUjtBQUVYQyxPQUFLO0FBRk0sRUFGcUI7QUFNakNDLGdCQUFjLEVBQUNQLE1BQU1RLE1BQVAsRUFBZUMsU0FBUSxDQUF2QixFQU5tQjtBQU9qQ0Msb0JBQWtCLENBQUM7QUFDbEJYLGVBQWFFLE1BREs7QUFFbEJVLFVBQVFWLE1BRlU7QUFHbEJXLGtCQUFnQlgsTUFIRTtBQUlsQlksZ0JBQWNaLE1BSkk7QUFLbEJhLFVBQVFiLE1BTFU7QUFNbEJjLG9CQUFpQixDQUFDO0FBQ2pCZixTQUFNSCxPQUFPTyxLQUFQLENBQWFDLFFBREY7QUFFakJDLFFBQUs7QUFGWSxHQUFELENBTkM7QUFVbEJVLGNBQVcsQ0FBQ2YsTUFBRDtBQVZPLEVBQUQsQ0FQZTtBQW1CakNnQixpQkFBZSxFQUFDakIsTUFBS2tCLE9BQU4sRUFBZWhCLE9BQU8sSUFBdEIsRUFBNEJPLFNBQVMsSUFBckMsRUFuQmtCO0FBb0JqQ0UsU0FBUSxFQUFDWCxNQUFNQyxNQUFQLEVBQWVRLFNBQVMsVUFBeEIsRUFwQnlCO0FBcUJqQ0csaUJBQWUsRUFBQ1osTUFBTW1CLElBQVAsRUFBYWpCLE9BQU8sSUFBcEIsRUFyQmtCO0FBc0JqQ2tCLGVBQWMsRUFBQ3BCLE1BQU1tQixJQUFQLEVBQWFqQixPQUFNLElBQW5CLEVBdEJtQjtBQXVCakNtQixvQkFBa0IsQ0FBQztBQUNsQkMsV0FBUTtBQUNQdEIsU0FBTUgsT0FBT08sS0FBUCxDQUFhQyxRQURaO0FBRVBDLFFBQUs7QUFGRSxHQURVO0FBS2xCaUIsbUJBQWlCdEIsTUFMQztBQU1sQnVCLGVBQWF2QixNQU5LO0FBT2xCd0Isb0JBQWlCLEVBQUN6QixNQUFNbUIsSUFBUCxFQUFhakIsT0FBTSxJQUFuQjtBQVBDLEVBQUQsQ0F2QmU7QUFnQ2pDWSxTQUFPLEVBQUNkLE1BQU1DLE1BQVAsRUFBZVEsU0FBUyxVQUF4QixFQWhDMEI7QUFpQ2pDSSxlQUFjLEVBQUNiLE1BQU1DLE1BQVAsRUFBZVEsU0FBUyxhQUF4QixFQWpDbUI7QUFrQ2pDTSxtQkFBaUIsQ0FBQztBQUNqQmYsUUFBTUgsT0FBT08sS0FBUCxDQUFhQyxRQURGO0FBRWpCQyxPQUFLO0FBRlksRUFBRCxDQWxDZ0I7QUFzQ2pDVSxhQUFXLENBQUM7QUFDWGhCLFFBQUtDO0FBRE0sRUFBRCxDQXRDc0I7QUF5Q2pDeUIsY0FBWSxDQUFDO0FBQ1oxQixRQUFLSCxPQUFPTyxLQUFQLENBQWFDLFFBRE47QUFFWkMsT0FBSTtBQUZRLEVBQUQsQ0F6Q3FCO0FBNkNqQ3FCLGNBQVksQ0FBQztBQUNaM0IsUUFBS0gsT0FBT08sS0FBUCxDQUFhQyxRQUROO0FBRVpDLE9BQUk7QUFGUSxFQUFEO0FBN0NxQixDQUFYLENBQXZCOztBQW9EQVIsZUFBZUksS0FBZixDQUFxQixFQUFDLGVBQWUsTUFBaEIsRUFBckI7QUFDQSxJQUFNMEIsV0FBV2pDLFNBQVNrQyxLQUFULENBQWUsVUFBZixFQUEwQi9CLGNBQTFCLENBQWpCOztBQUVBZ0MsT0FBT0MsT0FBUCxHQUFpQkgsUUFBakIiLCJmaWxlIjoiUHJlZ3VudGFzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKFwibW9uZ29vc2VcIik7XG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5cbmNvbnN0IFByZWd1bnRhU2NoZW1hID0gbmV3IFNjaGVtYSh7XG5cdGRlc2NyaXBjaW9uOnt0eXBlOiBTdHJpbmcsIGluZGV4OiB0cnVlfSxcblx0dXN1YXJpb19JRDoge1xuXHRcdHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcblx0XHRyZWY6IFwidXN1YXJpb1wiXG5cdH0sXG5cdGlkZW50aWZpY2Fkb3I6e3R5cGU6IE51bWJlciwgZGVmYXVsdDoxfSxcblx0aGlzdG9yaWFsX2NhbWJpb3M6W3tcblx0XHRkZXNjcmlwY2lvbjogU3RyaW5nLFxuXHRcdGltYWdlbjogU3RyaW5nLFxuXHRcdGZlY2hhX2NyZWFjaW9uOiBTdHJpbmcsXG5cdFx0dGlwb1ByZWd1bnRhOiBTdHJpbmcsXG5cdFx0ZXN0YWRvOiBTdHJpbmcsXG5cdFx0YXJlYWNvbm9jaW1pZW50bzpbe1xuXHRcdFx0dHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuXHRcdFx0cmVmOiBcImFyZWFzLWNvbm9jaW1pZW50b1wiXG5cdFx0fV0sXG5cdFx0cmVzcHVlc3RhczpbU3RyaW5nXVxuXHR9XSxcblx0cmVnaXN0cm9BY3R1YWw6e3R5cGU6Qm9vbGVhbiwgaW5kZXg6IHRydWUsIGRlZmF1bHQ6IHRydWV9LFxuXHRpbWFnZW46IHt0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwibm8gaW1hZ2VcIn0sXG5cdGZlY2hhX2NyZWFjaW9uOnt0eXBlOiBEYXRlLCBpbmRleDogdHJ1ZX0sXG5cdGZlY2hhX2NpZXJyZToge3R5cGU6IERhdGUsIGluZGV4OnRydWV9LFxuXHRlc3RhZG9zX2FzaWduYWRvczpbe1xuXHRcdHVzdWFyaW86e1xuXHRcdFx0dHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuXHRcdFx0cmVmOiBcInVzdWFyaW9cIlxuXHRcdH0sXG5cdFx0ZXN0YWRvX2FzaWduYWRvOiBTdHJpbmcsXG5cdFx0b2JzZXJ2YWNpb246IFN0cmluZyxcblx0XHRmZWNoYV9hc2lnbmFjaW9uOnt0eXBlOiBEYXRlLCBpbmRleDp0cnVlfVxuXHR9XSxcblx0ZXN0YWRvOnt0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwicmV2aXNpb25cIn0sXG5cdHRpcG9QcmVndW50YToge3R5cGU6IFN0cmluZywgZGVmYXVsdDogXCJvcGVuIGFuc3dlclwifSxcblx0YXJlYWNvbm9jaW1pZW50bzpbe1xuXHRcdHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcblx0XHRyZWY6IFwiYXJlYXMtY29ub2NpbWllbnRvXCJcblx0fV0sXG5cdHJlc3B1ZXN0YXM6W3tcblx0XHR0eXBlOlN0cmluZyxcblx0fV0sXG5cdGNvbWVudGFyaW9zOlt7XG5cdFx0dHlwZTpTY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG5cdFx0cmVmOlwiY29tZW50YXJpb1wiXG5cdH1dLFxuXHRkaXNjdXNpb25lczpbe1xuXHRcdHR5cGU6U2NoZW1hLlR5cGVzLk9iamVjdElkLFxuXHRcdHJlZjpcImRpc2N1c2lvblByZWd1bnRhXCJcblx0fV1cbn0pO1xuXG5cblByZWd1bnRhU2NoZW1hLmluZGV4KHtcImRlc2NyaXBjaW9uXCI6IFwidGV4dFwifSk7XG5jb25zdCBQcmVndW50YSA9IG1vbmdvb3NlLm1vZGVsKFwicHJlZ3VudGFcIixQcmVndW50YVNjaGVtYSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJlZ3VudGE7XG4iXX0=