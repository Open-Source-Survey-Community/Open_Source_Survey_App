"use strict";

var mongoose = require("mongoose");
var Schema = mongoose.Schema;

var PreguntaSchema = new Schema({
	descripcion: {type:String, index: true},
	usuario_ID: {
		type: Schema.Types.ObjectId,
		ref: "usuario"
	},
	identificador: { type: Number, default: 1 },
	historial_cambios: [{
		descripcion: String,
		imagen: String,
		fecha_creacion: String,
		tipoPregunta: String,
		estado: String,
		areaconocimiento: [{
			type: Schema.Types.ObjectId,
			ref: "areas-conocimiento"
		}],
		respuestas: [String]
	}],
	registroActual: { type: Boolean, index: true, default: true },
	imagen: { type: String, default: "no image" },
	fecha_creacion: { type: Date, index: true },
	fecha_cierre: { type: Date, index: true },
	estados_asignados: [{
		usuario: {
			type: Schema.Types.ObjectId,
			ref: "usuario"
		},
		estado_asignado: String,
		observacion: String,
		fecha_asignacion: { type: Date, index: true }
	}],
	estado: { type: String, index: true, default: "revision" },
	tipoPregunta: { type: String, default: "open answer" },
	areaconocimiento: [{
		type: Schema.Types.ObjectId,
		ref: "areas-conocimiento"
	}],
	respuestas: [{
		type: String
	}],
	comentarios: [{
		type: Schema.Types.ObjectId,
		ref: "comentario"
	}],
	discusiones: [{
		type: Schema.Types.ObjectId,
		ref: "discusionPregunta"
	}]
});

PreguntaSchema.index({ "descripcion": "text" });
var Pregunta = mongoose.model("pregunta", PreguntaSchema);

module.exports = Pregunta;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL21vZGVscy9QcmVndW50YXMuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiU2NoZW1hIiwiUHJlZ3VudGFTY2hlbWEiLCJkZXNjcmlwY2lvbiIsIlN0cmluZyIsInVzdWFyaW9fSUQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsImlkZW50aWZpY2Fkb3IiLCJOdW1iZXIiLCJkZWZhdWx0IiwiaGlzdG9yaWFsX2NhbWJpb3MiLCJpbWFnZW4iLCJmZWNoYV9jcmVhY2lvbiIsInRpcG9QcmVndW50YSIsImVzdGFkbyIsImFyZWFjb25vY2ltaWVudG8iLCJyZXNwdWVzdGFzIiwicmVnaXN0cm9BY3R1YWwiLCJCb29sZWFuIiwiaW5kZXgiLCJEYXRlIiwiZmVjaGFfY2llcnJlIiwiZXN0YWRvc19hc2lnbmFkb3MiLCJ1c3VhcmlvIiwiZXN0YWRvX2FzaWduYWRvIiwib2JzZXJ2YWNpb24iLCJmZWNoYV9hc2lnbmFjaW9uIiwiY29tZW50YXJpb3MiLCJkaXNjdXNpb25lcyIsIlByZWd1bnRhIiwibW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLFdBQVdDLFFBQVEsVUFBUixDQUFqQjtBQUNBLElBQU1DLFNBQVNGLFNBQVNFLE1BQXhCOztBQUVBLElBQU1DLGlCQUFpQixJQUFJRCxNQUFKLENBQVc7QUFDakNFLGNBQVlDLE1BRHFCO0FBRWpDQyxhQUFZO0FBQ1hDLFFBQU1MLE9BQU9NLEtBQVAsQ0FBYUMsUUFEUjtBQUVYQyxPQUFLO0FBRk0sRUFGcUI7QUFNakNDLGdCQUFjLEVBQUNKLE1BQU1LLE1BQVAsRUFBZUMsU0FBUSxDQUF2QixFQU5tQjtBQU9qQ0Msb0JBQWtCLENBQUM7QUFDbEJWLGVBQWFDLE1BREs7QUFFbEJVLFVBQVFWLE1BRlU7QUFHbEJXLGtCQUFnQlgsTUFIRTtBQUlsQlksZ0JBQWNaLE1BSkk7QUFLbEJhLFVBQVFiLE1BTFU7QUFNbEJjLG9CQUFpQixDQUFDO0FBQ2pCWixTQUFNTCxPQUFPTSxLQUFQLENBQWFDLFFBREY7QUFFakJDLFFBQUs7QUFGWSxHQUFELENBTkM7QUFVbEJVLGNBQVcsQ0FBQ2YsTUFBRDtBQVZPLEVBQUQsQ0FQZTtBQW1CakNnQixpQkFBZSxFQUFDZCxNQUFLZSxPQUFOLEVBQWVDLE9BQU8sSUFBdEIsRUFBNEJWLFNBQVMsSUFBckMsRUFuQmtCO0FBb0JqQ0UsU0FBUSxFQUFDUixNQUFNRixNQUFQLEVBQWVRLFNBQVMsVUFBeEIsRUFwQnlCO0FBcUJqQ0csaUJBQWUsRUFBQ1QsTUFBTWlCLElBQVAsRUFBYUQsT0FBTyxJQUFwQixFQXJCa0I7QUFzQmpDRSxlQUFjLEVBQUNsQixNQUFNaUIsSUFBUCxFQUFhRCxPQUFNLElBQW5CLEVBdEJtQjtBQXVCakNHLG9CQUFrQixDQUFDO0FBQ2xCQyxXQUFRO0FBQ1BwQixTQUFNTCxPQUFPTSxLQUFQLENBQWFDLFFBRFo7QUFFUEMsUUFBSztBQUZFLEdBRFU7QUFLbEJrQixtQkFBaUJ2QixNQUxDO0FBTWxCd0IsZUFBYXhCLE1BTks7QUFPbEJ5QixvQkFBaUIsRUFBQ3ZCLE1BQU1pQixJQUFQLEVBQWFELE9BQU0sSUFBbkI7QUFQQyxFQUFELENBdkJlO0FBZ0NqQ0wsU0FBTyxFQUFDWCxNQUFNRixNQUFQLEVBQWVrQixPQUFPLElBQXRCLEVBQTRCVixTQUFTLFVBQXJDLEVBaEMwQjtBQWlDakNJLGVBQWMsRUFBQ1YsTUFBTUYsTUFBUCxFQUFlUSxTQUFTLGFBQXhCLEVBakNtQjtBQWtDakNNLG1CQUFpQixDQUFDO0FBQ2pCWixRQUFNTCxPQUFPTSxLQUFQLENBQWFDLFFBREY7QUFFakJDLE9BQUs7QUFGWSxFQUFELENBbENnQjtBQXNDakNVLGFBQVcsQ0FBQztBQUNYYixRQUFLRjtBQURNLEVBQUQsQ0F0Q3NCO0FBeUNqQzBCLGNBQVksQ0FBQztBQUNaeEIsUUFBS0wsT0FBT00sS0FBUCxDQUFhQyxRQUROO0FBRVpDLE9BQUk7QUFGUSxFQUFELENBekNxQjtBQTZDakNzQixjQUFZLENBQUM7QUFDWnpCLFFBQUtMLE9BQU9NLEtBQVAsQ0FBYUMsUUFETjtBQUVaQyxPQUFJO0FBRlEsRUFBRDtBQTdDcUIsQ0FBWCxDQUF2Qjs7QUFvREFQLGVBQWVvQixLQUFmLENBQXFCLEVBQUMsZUFBZSxNQUFoQixFQUFyQjtBQUNBLElBQU1VLFdBQVdqQyxTQUFTa0MsS0FBVCxDQUFlLFVBQWYsRUFBMEIvQixjQUExQixDQUFqQjs7QUFFQWdDLE9BQU9DLE9BQVAsR0FBaUJILFFBQWpCIiwiZmlsZSI6IlByZWd1bnRhcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuXG5jb25zdCBQcmVndW50YVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuXHRkZXNjcmlwY2lvbjpTdHJpbmcsXG5cdHVzdWFyaW9fSUQ6IHtcblx0XHR0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG5cdFx0cmVmOiBcInVzdWFyaW9cIlxuXHR9LFxuXHRpZGVudGlmaWNhZG9yOnt0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6MX0sXG5cdGhpc3RvcmlhbF9jYW1iaW9zOlt7XG5cdFx0ZGVzY3JpcGNpb246IFN0cmluZyxcblx0XHRpbWFnZW46IFN0cmluZyxcblx0XHRmZWNoYV9jcmVhY2lvbjogU3RyaW5nLFxuXHRcdHRpcG9QcmVndW50YTogU3RyaW5nLFxuXHRcdGVzdGFkbzogU3RyaW5nLFxuXHRcdGFyZWFjb25vY2ltaWVudG86W3tcblx0XHRcdHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcblx0XHRcdHJlZjogXCJhcmVhcy1jb25vY2ltaWVudG9cIlxuXHRcdH1dLFxuXHRcdHJlc3B1ZXN0YXM6W1N0cmluZ11cblx0fV0sXG5cdHJlZ2lzdHJvQWN0dWFsOnt0eXBlOkJvb2xlYW4sIGluZGV4OiB0cnVlLCBkZWZhdWx0OiB0cnVlfSxcblx0aW1hZ2VuOiB7dHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIm5vIGltYWdlXCJ9LFxuXHRmZWNoYV9jcmVhY2lvbjp7dHlwZTogRGF0ZSwgaW5kZXg6IHRydWV9LFxuXHRmZWNoYV9jaWVycmU6IHt0eXBlOiBEYXRlLCBpbmRleDp0cnVlfSxcblx0ZXN0YWRvc19hc2lnbmFkb3M6W3tcblx0XHR1c3VhcmlvOntcblx0XHRcdHR5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCxcblx0XHRcdHJlZjogXCJ1c3VhcmlvXCJcblx0XHR9LFxuXHRcdGVzdGFkb19hc2lnbmFkbzogU3RyaW5nLFxuXHRcdG9ic2VydmFjaW9uOiBTdHJpbmcsXG5cdFx0ZmVjaGFfYXNpZ25hY2lvbjp7dHlwZTogRGF0ZSwgaW5kZXg6dHJ1ZX1cblx0fV0sXG5cdGVzdGFkbzp7dHlwZTogU3RyaW5nLCBpbmRleDogdHJ1ZSwgZGVmYXVsdDogXCJyZXZpc2lvblwifSxcblx0dGlwb1ByZWd1bnRhOiB7dHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIm9wZW4gYW5zd2VyXCJ9LFxuXHRhcmVhY29ub2NpbWllbnRvOlt7XG5cdFx0dHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuXHRcdHJlZjogXCJhcmVhcy1jb25vY2ltaWVudG9cIlxuXHR9XSxcblx0cmVzcHVlc3Rhczpbe1xuXHRcdHR5cGU6U3RyaW5nLFxuXHR9XSxcblx0Y29tZW50YXJpb3M6W3tcblx0XHR0eXBlOlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcblx0XHRyZWY6XCJjb21lbnRhcmlvXCJcblx0fV0sXG5cdGRpc2N1c2lvbmVzOlt7XG5cdFx0dHlwZTpTY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG5cdFx0cmVmOlwiZGlzY3VzaW9uUHJlZ3VudGFcIlxuXHR9XVxufSk7XG5cblxuUHJlZ3VudGFTY2hlbWEuaW5kZXgoe1wiZGVzY3JpcGNpb25cIjogXCJ0ZXh0XCJ9KTtcbmNvbnN0IFByZWd1bnRhID0gbW9uZ29vc2UubW9kZWwoXCJwcmVndW50YVwiLFByZWd1bnRhU2NoZW1hKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcmVndW50YTtcbiJdfQ==