{"version":3,"sources":["../../resolvers/comentarios.js"],"names":["Query","verComentario","parent","args","models","Comentario","findById","idComentario","populate","then","comentario","catch","error","Error","verListaSubComentarios","path","model","listaSubdocumentos","verComentariosAsociadosPregunta","hasnextPage","Promise","resolve","reject","valor","index","tamanoPaginas","limit","Pregunta","idPregunta","listaComentarios","comentarios","length","edges","skip","all","valores","hasnextElement","verComentariosAsociadosDiscusionPregunta","discusionPregunta","idDiscusionPregunta","Mutation","crearComentarioAnexadaAPregunta","count","existenComentariosCreados","identificador","objetoComentario","save","findByIdAndUpdate","$push","comentarioGuardado","new","crearComentarioAnexadaADiscusionPregunta","crearSubComentarioAnexadaAComentario","listaSubComentarios","editarComentario","registroComentario","creador_comentario","idUsuario","$set","contenido","fecha_actualizacion","Date","comentarioActualizado","colocarLikesComentario","findOne","votacion","like","dislike","findOneAndUpdate","colocarDisLikesComentario","colocarFavoritosComentario","favoritos"],"mappings":"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","file":"comentarios.js","sourcesContent":["export default {\n\n\tQuery:{\n\t\tverComentario: (parent, args, {models})=>{\n\t\t\treturn models.Comentario.findById(args.idComentario)\n\t\t\t\t.populate(\"creador_comentario\")\n\t\t\t\t.populate(\"listaSubComentarios\")\n\t\t\t\t.populate(\"votacion.usuario_creador\")\n\t\t\t\t.then(comentario => {\n\t\t\t\t\treturn comentario;\n\t\t\t\t}).catch(error =>{\n\t\t\t\t\tif (error){\n\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n        verListaSubComentarios: (parent, args, {models})=>{\n\t\t\treturn models.Comentario.findById(args.idComentario,\"listaSubComentarios\")\n                .populate({\n\t\t\t\t\tpath:\"listaSubComentarios\",\n\t\t\t\t\tpopulate:{\n\t\t\t\t\t\tpath: \"creador_comentario\",\n\t\t\t\t\t\tmodel:\"usuario\"\n\t\t\t\t\t}\n                })\n\t\t\t\t.populate({\n\t\t\t\t\tpath:\"listaSubComentarios\",\n\t\t\t\t\tpopulate:{\n\t\t\t\t\t\tpath:\"votacion.usuario_creador\",\n\t\t\t\t\t\tmodel:\"usuario\"\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(listaSubdocumentos =>{\n\t\t\t\t\treturn listaSubdocumentos;\n\t\t\t\t}).catch(error =>{\n\t\t\t\t\tthrow new Error(error);\n\t\t\t\t});\n\t\t},\n\t\tverComentariosAsociadosPregunta: (parent, args, {models})=>{\n\t\t\tlet hasnextPage = new Promise((resolve, reject) =>{\n\t\t\t\tlet valor= args.index + 1;\n\t\t\t\tlet tamanoPaginas = args.limit * valor;\n\t\t\t\treturn models.Pregunta.findById(args.idPregunta,\"comentarios\")\n\t\t\t\t\t.then(listaComentarios =>{\n\t\t\t\t\t\tif (tamanoPaginas >= listaComentarios.comentarios.length){\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch(error =>{\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t});\n\t\t\t});\n\t\t\tlet edges = new Promise((resolve, reject) =>{\n               return models.Pregunta.findById(args.idPregunta,\"comentarios\")\n\t\t\t\t\t.skip(args.index*args.limit)\n\t\t\t\t\t.limit(args.limit)\n                    .populate({\n                        path:\"comentarios\",\n                        populate:{\n                            path:\"creador_comentario\",\n                            model: \"usuario\"\n                        }\n                    })\n                    .populate({\n                        path: \"comentarios\",\n                        populate:{\n                            path:\"votacion.usuario_creador\",\n                            model:\"usuario\"\n                        }\n                    })\n                    .then(listaComentarios =>{\n\t\t\t\t\t\tresolve(listaComentarios.comentarios);\n\n                    }).catch(error =>{\n                    reject(error);\n                });\n\t\t\t});\n\t\t\treturn Promise.all([hasnextPage, edges]).then(valores =>{\n\t\t\t\treturn {\n\t\t\t\t\tedges: valores[1],\n\t\t\t\t\thasnextElement: valores[0]\n\t\t\t\t}\n\t\t\t}).catch(error =>{\n\t\t\t\tthrow new Error(error);\n\t\t\t});\n\t\t},\n\t\tverComentariosAsociadosDiscusionPregunta: (parent, args, {models})=>{\n            let hasnextPage = new Promise((resolve, reject) =>{\n                let valor= args.index + 1;\n                let tamanoPaginas = args.limit * valor;\n                return models.discusionPregunta.findById(args.idDiscusionPregunta,\"comentarios\")\n                    .then(listaComentarios =>{\n                        if (tamanoPaginas >= listaComentarios.comentarios.length){\n                            resolve(false);\n                        }else{\n                            resolve(true);\n                        }\n                    }).catch(error =>{\n                        reject(error);\n                    });\n            });\n            let edges = new Promise((resolve, reject) =>{\n                return models.discusionPregunta.findById(args.idDiscusionPregunta,\"comentarios\")\n                    .skip(args.index*args.limit)\n                    .limit(args.limit)\n                    .populate({\n                        path:\"comentarios\",\n                        populate:{\n                            path:\"creador_comentario\",\n                            model: \"usuario\"\n                        }\n                    })\n                    .populate({\n                        path: \"comentarios\",\n                        populate:{\n                            path:\"votacion.usuario_creador\",\n                            model:\"usuario\"\n                        }\n                    })\n                    .then(listaComentarios =>{\n                        resolve(listaComentarios.comentarios);\n\n                    }).catch(error =>{\n                        reject(error);\n                    });\n            });\n            return Promise.all([hasnextPage, edges]).then(valores =>{\n                return {\n                    edges: valores[1],\n                    hasnextElement: valores[0]\n                }\n            }).catch(error =>{\n                throw new Error(error);\n            });\n\t\t}\n\t},\n\tMutation:{\n\t\tcrearComentarioAnexadaAPregunta: (parent, args, {models})=>{\n\t\t\treturn models.Comentario.count()\n\t\t\t\t.then(existenComentariosCreados => {\n\t\t\t\t\tif (existenComentariosCreados){\n\t\t\t\t\t\targs.comentario.identificador = existenComentariosCreados + 1;\n\t\t\t\t\t}\n\t\t\t\t\tconst objetoComentario = new models.Comentario(args.comentario);\n\t\t\t\t\treturn objetoComentario.save()\n\t\t\t\t\t\t.then(comentarioGuardado => {\n\t\t\t\t\t\t\treturn models.Pregunta.findByIdAndUpdate(args.idPregunta,{\n\t\t\t\t\t\t\t\t$push:{comentarios:comentarioGuardado}\n\t\t\t\t\t\t\t},{new:true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn models.Comentario.populate(comentarioGuardado,\"creador_comentario\");\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tthrow new Error(error);\n\t\t\t\t});\n\t\t},\n\t\tcrearComentarioAnexadaADiscusionPregunta: (parent, args, {models})=>{\n\t\t\treturn models.Comentario.count()\n\t\t\t\t.then(existenComentariosCreados => {\n\t\t\t\t\tif (existenComentariosCreados){\n\t\t\t\t\t\targs.comentario.identificador = existenComentariosCreados + 1;\n\t\t\t\t\t}\n\t\t\t\t\tconst objetoComentario = new models.Comentario(args.comentario);\n\t\t\t\t\treturn objetoComentario.save()\n\t\t\t\t\t\t.then(comentarioGuardado => {\n\t\t\t\t\t\t\treturn models.discusionPregunta.findByIdAndUpdate(args.idDiscusionPregunta,{\n\t\t\t\t\t\t\t\t$push:{comentarios:comentarioGuardado}\n\t\t\t\t\t\t\t},{new:true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn models.Comentario.populate(comentarioGuardado,\"creador_comentario\");\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tthrow new Error(error);\n\t\t\t\t});\n\t\t},\n\t\tcrearSubComentarioAnexadaAComentario: (parent, args, {models})=>{\n\t\t\treturn models.Comentario.count()\n\t\t\t\t.then(existenComentariosCreados => {\n\t\t\t\t\tif (existenComentariosCreados){\n\t\t\t\t\t\targs.comentario.identificador = existenComentariosCreados + 1;\n\t\t\t\t\t}\n\t\t\t\t\tconst objetoComentario = new models.Comentario(args.comentario);\n\t\t\t\t\treturn objetoComentario.save()\n\t\t\t\t\t\t.then(comentarioGuardado => {\n\t\t\t\t\t\t\treturn models.Comentario.findByIdAndUpdate(args.idComentario,{\n\t\t\t\t\t\t\t\t$push:{listaSubComentarios:comentarioGuardado}\n\t\t\t\t\t\t\t},{new:true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn models.Comentario.populate(comentarioGuardado,\"creador_comentario\");\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\tif (error){\n\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tthrow new Error(error);\n\t\t\t\t});\n\t\t},\n\t\teditarComentario: (parent, args, {models}) => {\n\t\t\treturn models.Comentario.findById(args.idComentario)\n\t\t\t\t.then(registroComentario => {\n\t\t\t\t\tif (registroComentario.creador_comentario == args.idUsuario){\n\t\t\t\t\t\treturn models.Comentario.findByIdAndUpdate(args.idComentario,\n\t\t\t\t\t\t\t{$set:{contenido: args.contenido,fecha_actualizacion: new Date}},\n\t\t\t\t\t\t\t{new: true})\n\t\t\t\t\t\t\t.populate(\"creador_comentario\")\n\t\t\t\t\t\t\t.then(comentarioActualizado=>{\n\t\t\t\t\t\t\t\treturn comentarioActualizado;\n\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthrow new Error(\"this users is not the owner this question\");\n\t\t\t\t\t}\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tif (error){\n\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t},\n\t\tcolocarLikesComentario: (parent, args, {models})=>{\n\t\t\treturn models.Comentario.findOne({\"_id\": args.idComentario, \"votacion.usuario_creador\": args.idUsuario},{\"votacion.$\":1})\n\t\t\t\t.then(comentario => {\n\t\t\t\t\tif(comentario){\n\t\t\t\t\t\tif(comentario.votacion[0].like === 1 && comentario.votacion[0].dislike === 0){\n\t\t\t\t\t\t\treturn models.Comentario.findOneAndUpdate({\"_id\":args.idComentario,\"votacion.usuario_creador\": args.idUsuario},{\n\t\t\t\t\t\t\t\t$set:{\"votacion.$.usuario_creador\": args.idUsuario, \"votacion.$.like\":0}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn {like:-1, dislike:0};\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}else if(comentario.votacion[0].like === 0 && comentario.votacion[0].dislike === 1){\n\t\t\t\t\t\t\treturn models.Comentario.findOneAndUpdate({\"_id\":args.idComentario,\"votacion.usuario_creador\": args.idUsuario},{\n\t\t\t\t\t\t\t\t$set:{\"votacion.$.usuario_creador\": args.idUsuario, \"votacion.$.like\":1,\"votacion.$.dislike\":0}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn {like:1, dislike:-1};\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else if(comentario.votacion[0].like === 0 && comentario.votacion[0].dislike === 0){\n\t\t\t\t\t\t\treturn models.Comentario.findOneAndUpdate({\"_id\":args.idComentario,\"votacion.usuario_creador\": args.idUsuario},{\n\t\t\t\t\t\t\t\t$set:{\"votacion.$.usuario_creador\": args.idUsuario, \"votacion.$.like\":1}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn {like:1, dislike:0};\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn models.Comentario.findByIdAndUpdate(args.idComentario,\n\t\t\t\t\t\t\t{$push:{\"votacion\":{\"usuario_creador\": args.idUsuario, \"like\":1, \"dislike\":0, \"favoritos\":0}}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn {like:1, dislike:0};\n\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tif (error){\n\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tcolocarDisLikesComentario: (parent, args, {models})=>{\n\t\t\treturn models.Comentario.findOne({\"_id\": args.idComentario, \"votacion.usuario_creador\": args.idUsuario},{\"votacion.$\":1})\n\t\t\t\t.then(comentario => {\n\t\t\t\t\tif(comentario){\n\t\t\t\t\t\tif(comentario.votacion[0].like === 0 && comentario.votacion[0].dislike === 1){\n\t\t\t\t\t\t\treturn models.Comentario.findOneAndUpdate({\"_id\":args.idComentario,\"votacion.usuario_creador\": args.idUsuario},{\n\t\t\t\t\t\t\t\t$set:{\"votacion.$.usuario_creador\": args.idUsuario, \"votacion.$.dislike\":0}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn {like:0, dislike:-1};\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}else if(comentario.votacion[0].like === 1 && comentario.votacion[0].dislike === 0){\n\t\t\t\t\t\t\treturn models.Comentario.findOneAndUpdate({\"_id\":args.idComentario,\"votacion.usuario_creador\": args.idUsuario},{\n\t\t\t\t\t\t\t\t$set:{\"votacion.$.usuario_creador\": args.idUsuario, \"votacion.$.like\":0,\"votacion.$.dislike\":1}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn {like:-1, dislike:1};\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else if(comentario.votacion[0].like === 0 && comentario.votacion[0].dislike === 0){\n\t\t\t\t\t\t\treturn models.Comentario.findOneAndUpdate({\"_id\":args.idComentario,\"votacion.usuario_creador\": args.idUsuario},{\n\t\t\t\t\t\t\t\t$set:{\"votacion.$.usuario_creador\": args.idUsuario, \"votacion.$.dislike\":1}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn {like:0, dislike:1};\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn models.Comentario.findByIdAndUpdate(args.idComentario,\n\t\t\t\t\t\t\t{$push:{\"votacion\":{\"usuario_creador\": args.idUsuario, \"like\":0, \"dislike\":1, \"favoritos\":0}}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn {like:0, dislike:1};\n\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tif (error){\n\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tcolocarFavoritosComentario: (parent, args, {models})=>{\n\t\t\treturn models.Comentario.findOne({\"_id\": args.idComentario, \"votacion.usuario_creador\": args.idUsuario},{\"votacion.$\":1})\n\t\t\t\t.then(comentario => {\n\t\t\t\t\tif(comentario){\n\t\t\t\t\t\tif(comentario.votacion[0].favoritos === 1){\n\t\t\t\t\t\t\treturn models.Comentario.findOneAndUpdate({\"_id\":args.idComentario,\"votacion.usuario_creador\": args.idUsuario},{\n\t\t\t\t\t\t\t\t$set:{\"votacion.$.usuario_creador\": args.idUsuario, \"votacion.$.favoritos\":0}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}else if(comentario.votacion[0].favoritos === 0){\n\t\t\t\t\t\t\treturn models.Comentario.findOneAndUpdate({\"_id\":args.idComentario,\"votacion.usuario_creador\": args.idUsuario},{\n\t\t\t\t\t\t\t\t$set:{\"votacion.$.usuario_creador\": args.idUsuario, \"votacion.$.favoritos\":1}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn models.Comentario.findByIdAndUpdate(args.idComentario,\n\t\t\t\t\t\t\t{$push:{\"votacion\":{\"usuario_creador\": args.idUsuario, \"like\":0, \"dislike\":0, \"favoritos\":1}}\n\t\t\t\t\t\t\t},{new: true})\n\t\t\t\t\t\t\t.populate(\"votacion.usuario_creador\")\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\t\tif(error){\n\t\t\t\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tif (error){\n\t\t\t\t\t\tthrow new Error(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}\n};"]}